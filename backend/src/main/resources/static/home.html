
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->

<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Resume Uploader</title>-->
<!--    <style>-->
<!--        /* General Styles */-->
<!--        body {-->
<!--            font-family: Arial, sans-serif;-->
<!--            background-color: #f4f4f9;-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            align-items: center;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            box-sizing: border-box;-->
<!--        }-->

<!--        header {-->
<!--            width: 100%;-->
<!--            background-color: #007bff;-->
<!--            color: white;-->
<!--            padding: 10px 0;-->
<!--            display: flex;-->
<!--            justify-content: space-between;-->
<!--            align-items: center;-->
<!--            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);-->
<!--        }-->

<!--        header h1 {-->
<!--            margin: 0;-->
<!--            padding: 0 20px;-->
<!--            font-size: 1.5em;-->
<!--        }-->

<!--        .button-group {-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            gap: 20px;-->
<!--            margin-top: 20px;-->
<!--        }-->

<!--        .nav-button {-->
<!--            margin: 0 20px;-->
<!--            padding: 10px 20px;-->
<!--            font-size: 16px;-->
<!--            background-color: white;-->
<!--            color: #091521;-->
<!--            border: 2px solid white;-->
<!--            border-radius: 5px;-->
<!--            cursor: pointer;-->
<!--            transition: background-color 0.3s, color 0.3s, border 0.3s;-->
<!--        }-->

<!--        .nav-button:hover {-->
<!--            background-color: #0056b3;-->
<!--            color: white;-->
<!--            border: 2px solid #0056b3;-->
<!--        }-->

<!--        .container {-->
<!--            background-color: white;-->
<!--            padding: 40px;-->
<!--            border-radius: 8px;-->
<!--            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);-->
<!--            width: 90%;-->
<!--            max-width: 900px;-->
<!--            text-align: center;-->
<!--            margin-top: 20px;-->
<!--            position: relative;-->
<!--        }-->

<!--        .download-button {-->
<!--            background-color: #d3d3d3;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 15px 30px;-->
<!--            border-radius: 5px;-->
<!--            cursor: not-allowed;-->
<!--            font-size: 16px;-->
<!--            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);-->
<!--            transition: background-color 0.3s, box-shadow 0.3s;-->
<!--        }-->

<!--        .download-button.enabled {-->
<!--            background-color: #007bff;-->
<!--            cursor: pointer;-->
<!--            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);-->
<!--        }-->

<!--        .download-button.enabled:hover {-->
<!--            background-color: #0056b3;-->
<!--        }-->

<!--        h1 {-->
<!--            color: #333;-->
<!--            margin-bottom: 20px;-->
<!--            font-size: 2em;-->
<!--        }-->

<!--        input[type="file"],-->
<!--        select {-->
<!--            margin: 10px;-->
<!--            padding: 10px;-->
<!--            border: 2px solid #ddd;-->
<!--            border-radius: 5px;-->
<!--            width: calc(100% - 24px);-->
<!--            max-width: 400px;-->
<!--            background-color: #f9f9f9;-->
<!--            font-size: 16px;-->
<!--        }-->

<!--        button {-->
<!--            background-color: #007bff;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 15px 30px;-->
<!--            border-radius: 5px;-->
<!--            cursor: pointer;-->
<!--            font-size: 16px;-->
<!--        }-->

<!--        button:hover {-->
<!--            background-color: #0056b3;-->
<!--        }-->

<!--        table {-->
<!--            margin: 20px auto;-->
<!--            border-collapse: collapse;-->
<!--            width: 80%;-->
<!--            max-width: 600px;-->
<!--        }-->

<!--        table,-->
<!--        th,-->
<!--        td {-->
<!--            border: 1px solid #ddd;-->
<!--        }-->

<!--        th,-->
<!--        td {-->
<!--            padding: 10px;-->
<!--            text-align: left;-->
<!--        }-->

<!--        .overall-percentage {-->
<!--            font-size: 1.5em;-->
<!--            color: #007bff;-->
<!--            margin-top: 20px;-->
<!--            font-weight: bold;-->
<!--        }-->

<!--        .field-group {-->
<!--            margin: 20px 0;-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            align-items: center;-->
<!--        }-->

<!--        .field-group label {-->
<!--            display: block;-->
<!--            font-size: 16px;-->
<!--            margin-bottom: 10px;-->
<!--        }-->

<!--        .jd-options {-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            align-items: center;-->
<!--            margin: 20px 0;-->
<!--            gap: 20px;-->
<!--        }-->

<!--        .jd-option {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            width: 100%;-->
<!--            max-width: 400px;-->
<!--        }-->

<!--        .jd-option label {-->
<!--            margin-left: 10px;-->
<!--        }-->

<!--        .jd-option select,-->
<!--        .jd-option input[type="file"] {-->
<!--            margin-left: 20px;-->
<!--            width: 100%;-->
<!--            max-width: 300px;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->

<!--<body>-->
<!--<header>-->
<!--    <h1>Resume Matcher</h1>-->
<!--    <button class="nav-button" onclick="navigateToPractice9()">Upload and Download Resume</button>-->
<!--    <button class="nav-button" onclick="navigateToJd1()">Create JD</button>-->
<!--    <button class="nav-button" onclick="navigateToPractice12()">View JD</button>-->
<!--</header>-->

<!--<div class="container">-->
<!--    <h1>Resume Matcher</h1>-->

<!--    <form id="uploadForm" enctype="multipart/form-data">-->
<!--        <div class="field-group">-->
<!--            <label for="fileInput">Select Your Resume:</label>-->
<!--            <input type="file" name="file" id="fileInput" accept=".pdf,.doc,.docx" required>-->
<!--        </div>-->

<!--        <div class="jd-options">-->
<!--            <div class="jd-option">-->
<!--                <input type="radio" id="selectJdRadio" name="jdOption" value="selectJd" checked>-->
<!--                <label for="selectJdRadio">Select an Existing JD</label>-->
<!--                <select id="jdSelect" name="jdId">-->
<!--                    <option value="" disabled selected>Select Job Description</option>-->
<!--                </select>-->
<!--            </div>-->

<!--            <div class="jd-option">-->
<!--                <input type="radio" id="uploadJdRadio" name="jdOption" value="uploadJd">-->
<!--                <label for="uploadJdRadio">Upload a New JD</label>-->
<!--                <input type="file" name="jdFile" id="jdFileInput" accept=".pdf,.doc,.docx" disabled>-->
<!--            </div>-->
<!--        </div>-->

<!--        <div class="button-group">-->
<!--            <button type="submit">Submit</button>-->
<!--            <button type="button" id="downloadFeedbackButton" class="download-button" disabled>Download Feedback</button>-->


<!--        </div>-->
<!--    </form>-->

<!--    <div id="overallPercentage" class="overall-percentage"></div>-->

<!--    <div id="result" style="display: none;">-->
<!--        <h2>Mandatory Skills</h2>-->
<!--        <table id="mandatorySkillsTable">-->
<!--            <thead>-->
<!--            <tr>-->
<!--                <th>Mandatory Skill</th>-->
<!--                <th>Candidate Experience</th>-->
<!--                <th>Required Experience (years)</th>-->
<!--                <th>Percentage Match</th>-->
<!--                <th>Details</th>-->
<!--                <th>Matched Subskills</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody></tbody>-->
<!--        </table>-->

<!--        <h2>Other Tech Experience Of Candidate</h2>-->
<!--        <table id="itSkillsTable">-->
<!--            <thead>-->
<!--            <tr>-->
<!--                <th>Skill</th>-->
<!--                <th>Candidate Experience</th>-->
<!--                <th>Details</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody></tbody>-->
<!--        </table>-->
<!--    </div>-->
<!--</div>-->




<!--</body>-->

<!--</html>-->




<!--<script>-->
<!--    function navigateToPractice9() {-->
<!--        window.location.href = 'practice9.html';-->
<!--    }-->

<!--    function navigateToJd1() {-->
<!--        window.location.href = 'jd3.html';-->
<!--    }-->

<!--    function navigateToPractice12(){-->
<!--        window.location.href='list5.html';-->
<!--    }-->

<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        console.log("DOM fully loaded and parsed");-->
<!--        fetch('http://13.232.9.157:8080/jd/getIds')-->
<!--            .then(response => {-->
<!--                console.log("Fetching Job Descriptions...");-->
<!--                if (!response.ok) {-->
<!--                    throw new Error('Network response was not ok ' + response.statusText);-->
<!--                }-->
<!--                return response.json();-->
<!--            })-->
<!--            .then(data => {-->
<!--                const jdSelect = document.getElementById('jdSelect');-->
<!--                console.log("Job Descriptions Data: ", data);-->
<!--                data.forEach(item => {-->
<!--                    const option = document.createElement('option');-->
<!--                    option.value = item.id;-->
<!--                    option.textContent = item.title;-->
<!--                    jdSelect.appendChild(option);-->
<!--                });-->
<!--            })-->
<!--            .catch(error => console.error('Error fetching job descriptions:', error));-->

<!--        const selectJdRadio = document.getElementById('selectJdRadio');-->
<!--        const uploadJdRadio = document.getElementById('uploadJdRadio');-->
<!--        const jdSelect = document.getElementById('jdSelect');-->
<!--        const jdFileInput = document.getElementById('jdFileInput');-->

<!--        selectJdRadio.addEventListener('change', function() {-->
<!--            jdSelect.disabled = !this.checked;-->
<!--            jdFileInput.disabled = this.checked;-->
<!--        });-->

<!--        uploadJdRadio.addEventListener('change', function() {-->
<!--            jdSelect.disabled = this.checked;-->
<!--            jdFileInput.disabled = !this.checked;-->
<!--        });-->
<!--    });-->

<!--    document.getElementById('uploadForm').addEventListener('submit', function(event) {-->
<!--        event.preventDefault();-->

<!--        const selectedId = document.getElementById('jdSelect').value;-->
<!--        const jdFile = document.getElementById('jdFileInput').-->
<!--        files[0];-->
<!--        const formData = new FormData();-->
<!--        formData.append('file', document.getElementById('fileInput').files[0]);-->

<!--        if (document.getElementById('selectJdRadio').checked) {-->
<!--            formData.append('jdId', selectedId);-->
<!--        } else if (document.getElementById('uploadJdRadio').checked && jdFile) {-->
<!--            formData.append('jdFile', jdFile);-->
<!--        } else {-->
<!--            alert('Please select or upload a JD.');-->
<!--            return;-->
<!--        }-->

<!--        console.log("Selected Job Description ID: ", selectedId);-->
<!--        console.log("Form Data: ", formData);-->

<!--        fetch(`http://13.232.9.157:8080/upload`, {-->
<!--            method: 'POST',-->
<!--            body: formData-->
<!--        })-->
<!--        .then(response => {-->
<!--            console.log("Uploading file...");-->
<!--            if (!response.ok) {-->
<!--                throw new Error('Network response was not ok ' + response.statusText);-->
<!--            }-->
<!--            return response.json();-->
<!--        })-->
<!--        .then(data => {-->
<!--            console.log("Received data: ", data);-->
<!--            const itSkillsMap = data.itSkills || {};-->
<!--            const mandatorySkillsMap = data.mandatorySkills || {};-->
<!--            const overallPercentage = mandatorySkillsMap.overallPercentage || 0;-->
<!--            delete mandatorySkillsMap.overallPercentage;-->
<!--            console.log("IT Skills Map: ", itSkillsMap);-->
<!--            console.log("Mandatory Skills Map: ", mandatorySkillsMap);-->
<!--            console.log("Overall Percentage: ", overallPercentage);-->



<!--            // Display overall percentage-->
<!--            const overallPercentageDiv = document.getElementById('overallPercentage');-->
<!--            overallPercentageDiv.textContent = `Overall Percentage: ${overallPercentage.toFixed(2)}%`;-->

<!--            // Handle itSkills-->
<!--            const itSkillsTableBody = document.getElementById('itSkillsTable').querySelector('tbody');-->
<!--            itSkillsTableBody.innerHTML = '';-->
<!--            Object.entries(itSkillsMap).forEach(([skill, skillInfo]) => {-->
<!--                const row = document.createElement('tr');-->

<!--                const skillCell = document.createElement('td');-->
<!--                skillCell.textContent = skill;-->
<!--                row.appendChild(skillCell);-->

<!--                const durationCell = document.createElement('td');-->
<!--                durationCell.textContent = skillInfo.totalDuration;-->
<!--                row.appendChild(durationCell);-->

<!--                const detailsCell = document.createElement('td');-->
<!--                const detailsList = document.createElement('ul');-->

<!--                if (Array.isArray(skillInfo.details)) {-->
<!--                    skillInfo.details.forEach(detail => {-->
<!--                        const listItem = document.createElement('li');-->
<!--                        listItem.textContent = `From ${detail.startDate} to ${detail.endDate}: ${detail.durationInMonths} months`;-->
<!--                        detailsList.appendChild(listItem);-->
<!--                    });-->
<!--                } else {-->
<!--                    const listItem = document.createElement('li');-->
<!--                    listItem.textContent = 'Details not available';-->
<!--                    detailsList.appendChild(listItem);-->
<!--                }-->

<!--                detailsCell.appendChild(detailsList);-->
<!--                row.appendChild(detailsCell);-->

<!--                itSkillsTableBody.appendChild(row);-->
<!--            });-->

<!--            // Handle mandatorySkills-->
<!--            const mandatorySkillsTableBody = document.getElementById('mandatorySkillsTable').querySelector('tbody');-->
<!--            mandatorySkillsTableBody.innerHTML = '';-->
<!--            Object.entries(mandatorySkillsMap).forEach(([skill, skillInfo]) => {-->
<!--                const row = document.createElement('tr');-->

<!--                const skillCell = document.createElement('td');-->
<!--                skillCell.textContent = skill;-->
<!--                row.appendChild(skillCell);-->

<!--                const durationCell = document.createElement('td');-->
<!--                durationCell.textContent = skillInfo.totalDuration;-->
<!--                row.appendChild(durationCell);-->

<!--                const requiredExperienceCell = document.createElement('td');-->
<!--                requiredExperienceCell.textContent = skillInfo.requiredExperience;-->
<!--                row.appendChild(requiredExperienceCell);-->

<!--                const percentageCell = document.createElement('td');-->
<!--                percentageCell.textContent = skillInfo.percentage !== undefined ? `${skillInfo.percentage.toFixed(2)}%` : 'N/A';-->
<!--                row.appendChild(percentageCell);-->

<!--                const detailsCell = document.createElement('td');-->
<!--                const detailsList = document.createElement('ul');-->

<!--                if (Array.isArray(skillInfo.details)) {-->
<!--                    skillInfo.details.forEach(detail => {-->
<!--                        const listItem = document.createElement('li');-->
<!--                        listItem.textContent = `From ${detail.startDate} to ${detail.endDate}: ${detail.durationInMonths} months`;-->
<!--                        detailsList.appendChild(listItem);-->
<!--                    });-->
<!--                } else {-->
<!--                    const listItem = document.createElement('li');-->
<!--                    listItem.textContent = 'Details not available';-->
<!--                    detailsList.appendChild(listItem);-->
<!--                }-->

<!--                detailsCell.appendChild(detailsList);-->
<!--                row.appendChild(detailsCell);-->

<!--                const subskillsCell = document.createElement('td');-->
<!--                const subskillsList = document.createElement('ul');-->

<!--                if (Array.isArray(skillInfo.matchedSubSkills)) {-->
<!--                    skillInfo.matchedSubSkills.forEach(subskill => {-->
<!--                        const listItem = document.createElement('li');-->
<!--                        listItem.textContent = subskill;-->
<!--                        subskillsList.appendChild(listItem);-->
<!--                    });-->
<!--                } else {-->
<!--                    const listItem = document.createElement('li');-->
<!--                    listItem.textContent = 'No subskills';-->
<!--                    subskillsList.appendChild(listItem);-->
<!--                }-->

<!--                subskillsCell.appendChild(subskillsList);-->
<!--                row.appendChild(subskillsCell);-->

<!--                mandatorySkillsTableBody.appendChild(row);-->
<!--            });-->

<!--            // Display the result section-->
<!--            const resultDiv = document.getElementById('result');-->
<!--            resultDiv.style.display = 'block';-->
<!--            enableDownloadButton();-->
<!--        })-->
<!--        .catch(error => {-->
<!--            console.error('Error:', error);-->
<!--            alert('Error occurred. Please try again.');-->
<!--        });-->
<!--    });-->



<!--    // Add event listener for "Download Feedback" button-->
<!--document.getElementById('downloadFeedbackButton').addEventListener('click', function(event) {-->
<!--    event.preventDefault(); // Prevent default action-->

<!--    // Show confirmation popup-->
<!--    const sendEmail = confirm('Do you want to send feedback via email? Click OK to send.');-->

<!--    if (sendEmail) {-->
<!--        const email = prompt('Enter candidate email address:');-->
<!--        if (email === null || email.trim() === '') {-->
<!--            alert('Email address is required to send feedback.');-->
<!--            return;-->
<!--        }-->
<!--        // Proceed with sending email and downloading feedback-->
<!--        downloadFeedback(email);-->
<!--    } else {-->
<!--        // Proceed with only downloading feedback-->
<!--        downloadFeedback(null);-->
<!--    }-->
<!--});-->

<!--// function enableDownloadButton() {-->
<!--//     const downloadButton = document.getElementById('downloadFeedbackButton');-->
<!--//     downloadButton.disabled = false;-->

<!--// }-->


<!--function enableDownloadButton() {-->
<!--        const downloadButton = document.getElementById('downloadFeedbackButton');-->
<!--        downloadButton.classList.add('enabled');-->
<!--        downloadButton.disabled = false;-->
<!--    }-->


<!--function downloadFeedback(email) {-->
<!--    const selectedId = document.getElementById('jdSelect').value;-->
<!--    const formData = new FormData();-->
<!--    formData.append('file', document.getElementById('fileInput').files[0]);-->

<!--    const jdFile = document.getElementById('jdFileInput').files[0];-->
<!--    if (document.getElementById('selectJdRadio').checked) {-->
<!--        formData.append('jdId', selectedId);-->
<!--    } else if (document.getElementById('uploadJdRadio').checked && jdFile) {-->
<!--        formData.append('jdFile', jdFile);-->
<!--    } else {-->
<!--        alert('Please select or upload a JD.');-->
<!--        return;-->
<!--    }-->

<!--    if (email) {-->
<!--        formData.append('email', email);-->
<!--    }-->

<!--    fetch('http://13.232.9.157:8080/generateReport', {-->
<!--        method: 'POST',-->
<!--        body: formData-->
<!--    })-->
<!--    .then(response => {-->
<!--        if (!response.ok) {-->
<!--            throw new Error('Network response was not ok ' + response.statusText);-->
<!--        }-->
<!--        return response.blob();-->
<!--    })-->
<!--    .then(blob => {-->
<!--        const url = window.URL.createObjectURL(blob);-->
<!--        const a = document.createElement('a');-->
<!--        a.style.display = 'none';-->
<!--        a.href = url;-->
<!--        a.download = 'feedback.pdf';-->
<!--        document.body.appendChild(a);-->
<!--        a.click();-->
<!--        window.URL.revokeObjectURL(url);-->
<!--    })-->
<!--    .catch(error => {-->
<!--        console.error('Error:', error);-->
<!--        alert('Error occurred while downloading feedback. Please try again.');-->
<!--    });-->
<!--}-->

<!--</script>-->
<!--</body>-->
<!--</html>-->




<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Uploader</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        header {
            width: 100%;
            background-color: #007bff;
            color: white;
            padding: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            margin: 0;
            padding: 0 20px;
            font-size: 1.5em;
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .nav-button {
            margin: 0 20px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: white;
            color: #091521;
            border: 2px solid white;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s, border 0.3s;
        }

        .nav-button:hover {
            background-color: #0056b3;
            color: white;
            border: 2px solid #0056b3;
        }

        .container {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 900px;
            text-align: center;
            margin-top: 20px;
            position: relative;
        }

        .download-button {
            background-color: #d3d3d3;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: not-allowed;
            font-size: 16px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .download-button.enabled {
            background-color: #007bff;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .download-button.enabled:hover {
            background-color: #0056b3;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2em;
        }

        input[type="file"],
        select {
            margin: 10px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            width: calc(100% - 24px);
            max-width: 400px;
            background-color: #f9f9f9;
            font-size: 16px;
        }

        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #0056b3;
        }

        table {
            margin: 20px auto;
            border-collapse: collapse;
            width: 80%;
            max-width: 600px;
        }

        table,
        th,
        td {
            border: 1px solid #ddd;
        }

        th,
        td {
            padding: 10px;
            text-align: left;
        }

        .overall-percentage {
            font-size: 1.5em;
            color: #007bff;
            margin-top: 20px;
            font-weight: bold;
        }

        .field-group {
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .field-group label {
            display: block;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .jd-options {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
            gap: 20px;
        }

        .jd-option {
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 400px;
        }

        .jd-option label {
            margin-left: 10px;
        }

        .jd-option select,
        .jd-option input[type="file"] {
            margin-left: 20px;
            width: 100%;
            max-width: 300px;
        }

    .hidden {
        display: none;
    }
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 25;
        top: 0;
        width: 75%;
        height: 75%;
        overflow: auto;
        background-color: rgba(0,0,0,0);
        align-items: center;
        justify-content: center;
    }



    .modal-content {
        background-color: #fefefe;
        padding: 20px;
        border: 1px solid #888;
        width: 40%;
        max-width: 500px;
        height: 40%;
        max-height: 500px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    .close {
        align-self: flex-end;
        color: #aaa;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }
    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
    }
    .modal-content label {
        margin-bottom: 10px;
        font-size: 18px;
    }
    .modal-content input {
        padding: 10px;
        font-size: 16px;
        margin-bottom: 20px;
        width: 100%;
    }
    .modal-content button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        background-color: #3a80b9;
        color: white;
        border: none;
        border-radius: 5px;
    }
    .modal-content button:hover {
        background-color: #436692;
    }

    </style>
</head>

<body>
<header>
    <h1>Resume Matcher</h1>
    <button class="nav-button" onclick="navigateToPractice9()">Upload and Download Resume</button>
    <button class="nav-button" onclick="navigateToJd1()">Create JD</button>
    <button class="nav-button" onclick="navigateToPractice12()">View JD</button>
</header>

<div class="container">
    <h1>Resume Matcher</h1>

    <form id="uploadForm" enctype="multipart/form-data">
        <div class="field-group">
            <label for="fileInput">Select Your Resume:</label>
            <input type="file" name="file" id="fileInput" accept=".pdf,.doc,.docx" required>
        </div>

        <div class="jd-options">
            <div class="jd-option">
                <input type="radio" id="selectJdRadio" name="jdOption" value="selectJd" checked>
                <label for="selectJdRadio">Select an Existing JD</label>
                <select id="jdSelect" name="jdId">
                    <option value="" disabled selected>Select Job Description</option>
                </select>
            </div>

            <div class="jd-option">
                <input type="radio" id="uploadJdRadio" name="jdOption" value="uploadJd">
                <label for="uploadJdRadio">Upload a New JD</label>
                <input type="file" name="jdFile" id="jdFileInput" accept=".pdf,.doc,.docx" disabled>
            </div>
        </div>

        <div class="button-group">
            <button type="submit">Submit</button>
            <button type="button" id="downloadFeedbackButton" class="download-button" disabled>Download Feedback</button>
            <button type="button" id="downloadReportButton" class="download-button" disabled>Download Report</button>
            <button type="button" id="sendEmailButton" class="download-button" disabled>Send Feedback to Candidate</button>


        </div>

        <!-- Email Input Modal -->
        <div id="emailModal" class="modal hidden">
            <div class="modal-content">
                <span class="close">&times;</span>
                <p>Unable to fetch email id of candidate from resume. Kindly enter the candidate email id manually</p>
                <label for="modalEmailInput">Enter candidate email address:</label>
                <input type="email" id="modalEmailInput" placeholder="Enter email address">
                <button id="submitEmailButton">Submit</button>
            </div>
        </div>
    </form>

    <div id="overallPercentage" class="overall-percentage"></div>

    <div id="result" style="display: none;">
        <h2>Mandatory Skills</h2>
        <table id="mandatorySkillsTable">
            <thead>
            <tr>
                <th>Mandatory Skill</th>
                <th>Candidate Experience</th>
                <th>Required Experience (years)</th>
                <th>Percentage Match</th>
                <th>Details</th>
                <th>Matched Subskills</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>

        <h2>Other Tech Experience Of Candidate</h2>
        <table id="itSkillsTable">
            <thead>
            <tr>
                <th>Skill</th>
                <th>Candidate Experience</th>
                <th>Details</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>




</body>

</html>




<script>
    function navigateToPractice9() {
        window.location.href = 'practice9.html';
    }

    function navigateToJd1() {
        window.location.href = 'jd3.html';
    }

    function navigateToPractice12(){
        window.location.href='list5.html';
    }

    document.addEventListener('DOMContentLoaded', function() {
        console.log("DOM fully loaded and parsed");
        fetch('http://13.232.9.157:8080/jd/getIds')
            .then(response => {
                console.log("Fetching Job Descriptions...");
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                const jdSelect = document.getElementById('jdSelect');
                console.log("Job Descriptions Data: ", data);
                data.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.id;
                    option.textContent = item.title;
                    jdSelect.appendChild(option);
                });
            })
            .catch(error => console.error('Error fetching job descriptions:', error));

        const selectJdRadio = document.getElementById('selectJdRadio');
        const uploadJdRadio = document.getElementById('uploadJdRadio');
        const jdSelect = document.getElementById('jdSelect');
        const jdFileInput = document.getElementById('jdFileInput');

        selectJdRadio.addEventListener('change', function() {
            jdSelect.disabled = !this.checked;
            jdFileInput.disabled = this.checked;
        });

        uploadJdRadio.addEventListener('change', function() {
            jdSelect.disabled = this.checked;
            jdFileInput.disabled = !this.checked;
        });
    });

    document.getElementById('uploadForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const selectedId = document.getElementById('jdSelect').value;
        const jdFile = document.getElementById('jdFileInput').
        files[0];
        const formData = new FormData();
        formData.append('file', document.getElementById('fileInput').files[0]);

        if (document.getElementById('selectJdRadio').checked) {
            formData.append('jdId', selectedId);
        } else if (document.getElementById('uploadJdRadio').checked && jdFile) {
            formData.append('jdFile', jdFile);
        } else {
            alert('Please select or upload a JD.');
            return;
        }

        console.log("Selected Job Description ID: ", selectedId);
        console.log("Form Data: ", formData);

        fetch(`http://13.232.9.157:8080/upload`, {
            method: 'POST',
            body: formData
        })
        .then(response => {
            console.log("Uploading file...");
            if (!response.ok) {
                throw new Error('Network response was not ok ' + response.statusText);
            }
            return response.json();
        })
        .then(data => {
            console.log("Received data: ", data);
            const itSkillsMap = data.itSkills || {};
            const mandatorySkillsMap = data.mandatorySkills || {};
            const overallPercentage = mandatorySkillsMap.overallPercentage || 0;
            delete mandatorySkillsMap.overallPercentage;
            console.log("IT Skills Map: ", itSkillsMap);
            console.log("Mandatory Skills Map: ", mandatorySkillsMap);
            console.log("Overall Percentage: ", overallPercentage);



            // Display overall percentage
            const overallPercentageDiv = document.getElementById('overallPercentage');
            overallPercentageDiv.textContent = `Overall Percentage: ${overallPercentage.toFixed(2)}%`;

            // Handle itSkills
            const itSkillsTableBody = document.getElementById('itSkillsTable').querySelector('tbody');
            itSkillsTableBody.innerHTML = '';
            Object.entries(itSkillsMap).forEach(([skill, skillInfo]) => {
                const row = document.createElement('tr');

                const skillCell = document.createElement('td');
                skillCell.textContent = skill;
                row.appendChild(skillCell);

                const durationCell = document.createElement('td');
                durationCell.textContent = skillInfo.totalDuration;
                row.appendChild(durationCell);

                const detailsCell = document.createElement('td');
                const detailsList = document.createElement('ul');

                if (Array.isArray(skillInfo.details)) {
                    skillInfo.details.forEach(detail => {
                        const listItem = document.createElement('li');
                        listItem.textContent = `From ${detail.startDate} to ${detail.endDate}: ${detail.durationInMonths} months`;
                        detailsList.appendChild(listItem);
                    });
                } else {
                    const listItem = document.createElement('li');
                    listItem.textContent = 'Details not available';
                    detailsList.appendChild(listItem);
                }

                detailsCell.appendChild(detailsList);
                row.appendChild(detailsCell);

                itSkillsTableBody.appendChild(row);
            });

            // Handle mandatorySkills
            const mandatorySkillsTableBody = document.getElementById('mandatorySkillsTable').querySelector('tbody');
            mandatorySkillsTableBody.innerHTML = '';
            Object.entries(mandatorySkillsMap).forEach(([skill, skillInfo]) => {
                const row = document.createElement('tr');

                const skillCell = document.createElement('td');
                skillCell.textContent = skill;
                row.appendChild(skillCell);

                const durationCell = document.createElement('td');
                durationCell.textContent = skillInfo.totalDuration;
                row.appendChild(durationCell);

                const requiredExperienceCell = document.createElement('td');
                requiredExperienceCell.textContent = skillInfo.requiredExperience;
                row.appendChild(requiredExperienceCell);

                const percentageCell = document.createElement('td');
                percentageCell.textContent = skillInfo.percentage !== undefined ? `${skillInfo.percentage.toFixed(2)}%` : 'N/A';
                row.appendChild(percentageCell);

                const detailsCell = document.createElement('td');
                const detailsList = document.createElement('ul');

                if (Array.isArray(skillInfo.details)) {
                    skillInfo.details.forEach(detail => {
                        const listItem = document.createElement('li');
                        listItem.textContent = `From ${detail.startDate} to ${detail.endDate}: ${detail.durationInMonths} months`;
                        detailsList.appendChild(listItem);
                    });
                } else {
                    const listItem = document.createElement('li');
                    listItem.textContent = 'Details not available';
                    detailsList.appendChild(listItem);
                }

                detailsCell.appendChild(detailsList);
                row.appendChild(detailsCell);

                const subskillsCell = document.createElement('td');
                const subskillsList = document.createElement('ul');

                if (Array.isArray(skillInfo.matchedSubSkills)) {
                    skillInfo.matchedSubSkills.forEach(subskill => {
                        const listItem = document.createElement('li');
                        listItem.textContent = subskill;
                        subskillsList.appendChild(listItem);
                    });
                } else {
                    const listItem = document.createElement('li');
                    listItem.textContent = 'No subskills';
                    subskillsList.appendChild(listItem);
                }

                subskillsCell.appendChild(subskillsList);
                row.appendChild(subskillsCell);

                mandatorySkillsTableBody.appendChild(row);
            });

            // Display the result section
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            enableDownloadButton();

            document.getElementById('downloadReportButton').classList.add('enabled');
            document.getElementById('downloadReportButton').disabled = false;
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error occurred. Please try again.');
        });
    });

    document.getElementById('downloadReportButton').addEventListener('click', function() {
    const fileInput = document.getElementById('fileInput');
    const jdFileInput = document.getElementById('jdFileInput');
    const selectedId = document.getElementById('jdSelect').value;

    if (!fileInput || !fileInput.files.length) {
        console.error('Resume file input is missing or no file selected.');
        return;
    }

    const formData = new FormData();
    formData.append('file', fileInput.files[0]);

    if (jdFileInput && jdFileInput.files.length > 0) {
        formData.append('jdFile', jdFileInput.files[0]);
    } else if (selectedId) {
        formData.append('jdId', selectedId);
    } else {
        console.error('Neither JD file nor JD ID provided.');
        return;
    }

    fetch('http://13.232.9.157:8080/downloadMatchReportPdf', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.blob();
    })
    .then(blob => {
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.style.display = 'none';
        a.href = url;
        a.download = 'report.pdf';
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
    })
    .catch(error => {
        console.error('There has been a problem with your fetch operation:', error);
    });
});





    // Add event listener for "Download Feedback" button
<!--document.getElementById('downloadFeedbackButton').addEventListener('click', function(event) {-->
<!--    event.preventDefault(); // Prevent default action-->

<!--    // Show confirmation popup-->
<!--    const sendEmail = confirm('Do you want to send feedback via email? Click OK to send.');-->

<!--    if (sendEmail) {-->
<!--        const email = prompt('Enter your email address:');-->
<!--        if (email === null || email.trim() === '') {-->
<!--            alert('Email address is required to send feedback.');-->
<!--            return;-->
<!--        }-->
<!--        // Proceed with sending email and downloading feedback-->
<!--        downloadFeedback(email);-->
<!--    } else {-->
<!--        // Proceed with only downloading feedback-->
<!--        downloadFeedback(null);-->
<!--    }-->
<!--});-->

document.getElementById('downloadFeedbackButton').addEventListener('click', function(event) {
    event.preventDefault(); // Prevent default action

    // Directly proceed with downloading feedback
    downloadFeedback();
});

// function enableDownloadButton() {
//     const downloadButton = document.getElementById('downloadFeedbackButton');
//     downloadButton.disabled = false;

// }


function enableDownloadButton() {
        const downloadButton = document.getElementById('downloadFeedbackButton');
        downloadButton.classList.add('enabled');
        downloadButton.disabled = false;

        const sendEmailButton = document.getElementById('sendEmailButton');
        sendEmailButton.classList.add('enabled');
        sendEmailButton.disabled = false;
    }


<!--function downloadFeedback(email) {-->
<!--    const selectedId = document.getElementById('jdSelect').value;-->
<!--    const formData = new FormData();-->
<!--    formData.append('file', document.getElementById('fileInput').files[0]);-->

<!--    const jdFile = document.getElementById('jdFileInput').files[0];-->
<!--    if (document.getElementById('selectJdRadio').checked) {-->
<!--        formData.append('jdId', selectedId);-->
<!--    } else if (document.getElementById('uploadJdRadio').checked && jdFile) {-->
<!--        formData.append('jdFile', jdFile);-->
<!--    } else {-->
<!--        alert('Please select or upload a JD.');-->
<!--        return;-->
<!--    }-->

<!--    if (email) {-->
<!--        formData.append('email', email);-->
<!--    }-->

<!--    fetch('http://13.232.9.157:8080/generateReport', {-->
<!--        method: 'POST',-->
<!--        body: formData-->
<!--    })-->
<!--    .then(response => {-->
<!--        if (!response.ok) {-->
<!--            throw new Error('Network response was not ok ' + response.statusText);-->
<!--        }-->
<!--        return response.blob();-->
<!--    })-->
<!--    .then(blob => {-->
<!--        const url = window.URL.createObjectURL(blob);-->
<!--        const a = document.createElement('a');-->
<!--        a.style.display = 'none';-->
<!--        a.href = url;-->
<!--        a.download = 'feedback.pdf';-->
<!--        document.body.appendChild(a);-->
<!--        a.click();-->
<!--        window.URL.revokeObjectURL(url);-->
<!--    })-->
<!--    .catch(error => {-->
<!--        console.error('Error:', error);-->
<!--        alert('Error occurred while downloading feedback. Please try again.');-->
<!--    });-->
<!--}-->

    function downloadFeedback() {
    const selectedId = document.getElementById('jdSelect').value;
    const formData = new FormData();
    formData.append('file', document.getElementById('fileInput').files[0]);

    const jdFile = document.getElementById('jdFileInput').files[0];
    if (document.getElementById('selectJdRadio').checked) {
        formData.append('jdId', selectedId);
    } else if (document.getElementById('uploadJdRadio').checked && jdFile) {
        formData.append('jdFile', jdFile);
    } else {
        alert('Please select or upload a JD.');
        return;
    }

    fetch('http://13.232.9.157:8080/generateReport', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
        }
        return response.blob();
    })
    .then(blob => {
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.style.display = 'none';
        a.href = url;
        a.download = 'feedback.pdf';
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error occurred while downloading feedback. Please try again.');
    });
}


    document.getElementById('sendEmailButton').addEventListener('click', function() {
        sendEmail();
    });

    function sendEmail(email = '') {
    const fileInput = document.getElementById('fileInput');
    const jdFileInput = document.getElementById('jdFileInput');
    const selectedId = document.getElementById('jdSelect').value;

    if (!fileInput || !fileInput.files.length) {
        console.error('Resume file input is missing or no file selected.');
        return;
    }

    const formData = new FormData();
    formData.append('file', fileInput.files[0]);

    if (jdFileInput && jdFileInput.files.length > 0) {
        formData.append('jdFile', jdFileInput.files[0]);
    } else if (selectedId) {
        formData.append('jdId', selectedId);
    } else {
        console.error('Neither JD file nor JD ID provided.');
        return;
    }

    if (email) {
        formData.append('email', email);
    }

    fetch('http://13.232.9.157:8080/sendReportEmail', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        if (response.status === 400) {
            return response.text().then(text => {
                throw new Error(text);
            });
        }
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.text();
    })
    .then(data => {
        alert('Email sent successfully');
    })
    .catch(error => {
        if (error.message.includes("Unable to extract email from the resume. Please provide an email address.")) {
            openEmailModal();
        } else {
            console.error('There has been a problem with your fetch operation:', error);
            alert('Error occurred while sending email. Please try again.');
        }
    });
}

function openEmailModal() {
    const emailModal = document.getElementById('emailModal');
    const closeButton = document.querySelector('.close');
    const submitEmailButton = document.getElementById('submitEmailButton');

    emailModal.classList.remove('hidden');
    emailModal.style.display = "block";

    closeButton.onclick = function() {
        emailModal.classList.add('hidden');
        emailModal.style.display = "none";
    }

    submitEmailButton.onclick = function() {
        const email = document.getElementById('modalEmailInput').value;
        if (validateEmail(email)) {
            emailModal.classList.add('hidden');
            emailModal.style.display = "none";
            sendEmail(email);
        } else {
            alert('Please enter a valid email address.');
        }
    }

    window.onclick = function(event) {
        if (event.target == emailModal) {
            emailModal.classList.add('hidden');
            emailModal.style.display = "none";
        }
    }
}

function validateEmail(email) {
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email);
}


</script>
</body>
</html>